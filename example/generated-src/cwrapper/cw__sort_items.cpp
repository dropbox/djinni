// AUTOGENERATED FILE - DO NOT MODIFY!
// This file generated by Djinni from example.djinni

#include <iostream> // for debugging
#include <cassert>
#include "wrapper_marshal.hpp"
#include "sort_items.hpp"

#include "cw__sort_items.hpp"
#include "cw__textbox_listener.hpp"
#include "dh__item_list.hpp"
#include "dh__sort_order.hpp"
#include "sort_order.hpp"

std::shared_ptr<::textsort::SortItems> DjinniWrapperSortItems::get(djinni::WrapperRef<DjinniWrapperSortItems> dw) {
    if (dw) {
        return dw->wrapped_obj;
    }
    return nullptr;
}

void sort_items___wrapper_add_ref(DjinniWrapperSortItems * dh) {
    dh->ref_count.fetch_add(1);
}
void sort_items___wrapper_dec_ref(DjinniWrapperSortItems * dh) {
    const size_t ref = dh->ref_count.fetch_sub(1);
    if (ref == 1) {// value before sub is returned
        delete dh;
    }
}
djinni::Handle<DjinniWrapperSortItems> DjinniWrapperSortItems::wrap(std::shared_ptr<::textsort::SortItems> obj) {
    if (obj)
        return djinni::Handle<DjinniWrapperSortItems>(new DjinniWrapperSortItems{ std::move(obj) }, sort_items___wrapper_dec_ref);
    return nullptr;
}

void cw__sort_items_sort(DjinniWrapperSortItems * djinni_this, int order, DjinniRecordHandle * items) {
    djinni::Handle<DjinniRecordHandle> _items(items, item_list___delete);
    try {
        djinni_this->wrapped_obj->sort(static_cast<::textsort::sort_order>(order), DjinniItemList::toCpp(std::move(_items)));
    } CW_TRANSLATE_EXCEPTIONS_RETURN();
}
DjinniWrapperSortItems * cw__sort_items_create_with_listener(DjinniWrapperTextboxListener * listener) {
    djinni::Handle<DjinniWrapperTextboxListener> _listener(listener, textbox_listener___wrapper_dec_ref);
    try {
        return DjinniWrapperSortItems::wrap(std::move(::textsort::SortItems::create_with_listener(DjinniWrapperTextboxListener::get(std::move(_listener))))).release();
    } CW_TRANSLATE_EXCEPTIONS_RETURN(0);
}

DjinniRecordHandle * cw__sort_items_run_sort(DjinniRecordHandle * items) {
    djinni::Handle<DjinniRecordHandle> _items(items, item_list___delete);
    try {
        return DjinniItemList::fromCpp(::textsort::SortItems::run_sort(DjinniItemList::toCpp(std::move(_items)))).release();
    } CW_TRANSLATE_EXCEPTIONS_RETURN(0);
}
