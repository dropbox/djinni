// AUTOGENERATED FILE - DO NOT MODIFY!
// This file generated by Djinni from foo_client_interface.djinni

#include <iostream> // for debugging
#include <cassert>
#include "wrapper_marshal.hpp"
#include "foo_client_interface.hpp"

#include "cw__foo_client_interface.hpp"
#include "dh__foo_client_returned_record.hpp"
#include "dh__foo_extensible_record.hpp"

std::shared_ptr<::testsuite::FooClientInterface> DjinniWrapperFooClientInterface::get(djinni::WrapperRef<DjinniWrapperFooClientInterface> dw) {
    if (dw) {
        return dw->wrapped_obj;
    }
    return nullptr;
}

void foo_client_interface___wrapper_add_ref(DjinniWrapperFooClientInterface * dh) {
    dh->ref_count.fetch_add(1);
}
void foo_client_interface___wrapper_dec_ref(DjinniWrapperFooClientInterface * dh) {
    const size_t ref = dh->ref_count.fetch_sub(1);
    if (ref == 1) {// value before sub is returned
        delete dh;
    }
}
djinni::Handle<DjinniWrapperFooClientInterface> DjinniWrapperFooClientInterface::wrap(std::shared_ptr<::testsuite::FooClientInterface> obj) {
    if (obj)
        return djinni::Handle<DjinniWrapperFooClientInterface>(new DjinniWrapperFooClientInterface{ std::move(obj) }, foo_client_interface___wrapper_dec_ref);
    return nullptr;
}

void cw__foo_client_interface_set_record(DjinniWrapperFooClientInterface * djinni_this, DjinniRecordHandle * rec) {
    djinni::Handle<DjinniRecordHandle> _rec(rec, foo_client_returned_record___delete);
    try {
        djinni_this->wrapped_obj->set_record(DjinniFooClientReturnedRecord::toCpp(std::move(_rec)));
    } CW_TRANSLATE_EXCEPTIONS_RETURN();
}

DjinniRecordHandle * cw__foo_client_interface_get_record(DjinniWrapperFooClientInterface * djinni_this) {
    try {
        return DjinniFooClientReturnedRecord::fromCpp(djinni_this->wrapped_obj->get_record()).release();
    } CW_TRANSLATE_EXCEPTIONS_RETURN(0);
}

void cw__foo_client_interface_set_extensible_record(DjinniWrapperFooClientInterface * djinni_this, DjinniRecordHandle * rec) {
    djinni::Handle<DjinniRecordHandle> _rec(rec, foo_extensible_record___delete);
    try {
        djinni_this->wrapped_obj->set_extensible_record(DjinniFooExtensibleRecord::toCpp(std::move(_rec)));
    } CW_TRANSLATE_EXCEPTIONS_RETURN();
}

DjinniRecordHandle * cw__foo_client_interface_get_extensible_record(DjinniWrapperFooClientInterface * djinni_this) {
    try {
        return DjinniFooExtensibleRecord::fromCpp(djinni_this->wrapped_obj->get_extensible_record()).release();
    } CW_TRANSLATE_EXCEPTIONS_RETURN(0);
}

int32_t cw__foo_client_interface_get_extensible_record_number2(DjinniWrapperFooClientInterface * djinni_this) {
    try {
        return djinni_this->wrapped_obj->get_extensible_record_number2();
    } CW_TRANSLATE_EXCEPTIONS_RETURN(0);
}

DjinniString * cw__foo_client_interface_get_extensible_record_string2(DjinniWrapperFooClientInterface * djinni_this) {
    try {
        return DjinniString::fromCpp(djinni_this->wrapped_obj->get_extensible_record_string2()).release();
    } CW_TRANSLATE_EXCEPTIONS_RETURN(0);
}
DjinniWrapperFooClientInterface * cw__foo_client_interface_create() {
    try {
        return DjinniWrapperFooClientInterface::wrap(std::move(::testsuite::FooClientInterface::create())).release();
    } CW_TRANSLATE_EXCEPTIONS_RETURN(0);
}
