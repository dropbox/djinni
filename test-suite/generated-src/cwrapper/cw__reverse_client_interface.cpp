// AUTOGENERATED FILE - DO NOT MODIFY!
// This file generated by Djinni from client_interface.djinni

#include <iostream> // for debugging
#include <cassert>
#include "wrapper_marshal.hpp"
#include "reverse_client_interface.hpp"

#include "cw__reverse_client_interface.hpp"
#include <experimental/optional>

std::shared_ptr<::testsuite::ReverseClientInterface> DjinniWrapperReverseClientInterface::get(djinni::WrapperRef<DjinniWrapperReverseClientInterface> dw) {
    if (dw) {
        return dw->wrapped_obj;
    }
    return nullptr;
}

void reverse_client_interface___wrapper_add_ref(DjinniWrapperReverseClientInterface * dh) {
    dh->ref_count.fetch_add(1);
}
void reverse_client_interface___wrapper_dec_ref(DjinniWrapperReverseClientInterface * dh) {
    const size_t ref = dh->ref_count.fetch_sub(1);
    if (ref == 1) {// value before sub is returned
        delete dh;
    }
}
djinni::Handle<DjinniWrapperReverseClientInterface> DjinniWrapperReverseClientInterface::wrap(std::shared_ptr<::testsuite::ReverseClientInterface> obj) {
    if (obj)
        return djinni::Handle<DjinniWrapperReverseClientInterface>(new DjinniWrapperReverseClientInterface{ std::move(obj) }, reverse_client_interface___wrapper_dec_ref);
    return nullptr;
}

DjinniString * cw__reverse_client_interface_return_str(DjinniWrapperReverseClientInterface * djinni_this) {
    try {
        return DjinniString::fromCpp(djinni_this->wrapped_obj->return_str()).release();
    } CW_TRANSLATE_EXCEPTIONS_RETURN(0);
}

DjinniString * cw__reverse_client_interface_meth_taking_interface(DjinniWrapperReverseClientInterface * djinni_this, DjinniWrapperReverseClientInterface * i) {
    djinni::Handle<DjinniWrapperReverseClientInterface> _i(i, reverse_client_interface___wrapper_dec_ref);
    try {
        return DjinniString::fromCpp(djinni_this->wrapped_obj->meth_taking_interface(DjinniWrapperReverseClientInterface::get(std::move(_i)))).release();
    } CW_TRANSLATE_EXCEPTIONS_RETURN(0);
}

DjinniString * cw__reverse_client_interface_meth_taking_optional_interface(DjinniWrapperReverseClientInterface * djinni_this, DjinniWrapperReverseClientInterface * i) {
    djinni::Handle<DjinniWrapperReverseClientInterface> _i(i, reverse_client_interface___wrapper_dec_ref);
    try {
        return DjinniString::fromCpp(djinni_this->wrapped_obj->meth_taking_optional_interface(DjinniWrapperReverseClientInterface::get(std::move(_i)))).release();
    } CW_TRANSLATE_EXCEPTIONS_RETURN(0);
}
DjinniWrapperReverseClientInterface * cw__reverse_client_interface_create() {
    try {
        return DjinniWrapperReverseClientInterface::wrap(std::move(::testsuite::ReverseClientInterface::create())).release();
    } CW_TRANSLATE_EXCEPTIONS_RETURN(0);
}
