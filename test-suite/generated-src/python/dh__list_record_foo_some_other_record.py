# AUTOGENERATED FILE - DO NOT MODIFY!
# This file generated by Djinni from foo_containers.djinni

from djinni.support import MultiSet # default imported in all files
from djinni.exception import CPyException # default imported in all files
from djinni.pycffi_marshal import CPyObject, CPyRecord

from foo_some_other_record import FooSomeOtherRecord
from PyCFFIlib_cffi import ffi, lib

from djinni import exception # this forces run of __init__.py which gives cpp option to call back into py to create exception

class ListRecordFooSomeOtherRecordHelper:
    c_data_set = MultiSet()

    @staticmethod
    def check_c_data_set_empty():
        assert len(ListRecordFooSomeOtherRecordHelper.c_data_set) == 0
        FooSomeOtherRecord.check_c_data_set_empty()

    @ffi.callback("struct DjinniRecordHandle *(struct DjinniObjectHandle *, size_t)")
    def __get_elem(cself, index):
        try:
            _ret = CPyRecord.fromPy(FooSomeOtherRecord.c_data_set, CPyObject.toPy(None, cself)[index])
            assert _ret != ffi.NULL
            return _ret
        except Exception as _djinni_py_e:
            CPyException.setExceptionFromPy(_djinni_py_e)
            return ffi.NULL

    @ffi.callback("size_t(struct DjinniObjectHandle *)")
    def __get_size(cself):
        return len(CPyObject.toPy(None, cself))

    @ffi.callback("struct DjinniObjectHandle *()")
    def __python_create():
        c_ptr = ffi.new_handle(list())
        ListRecordFooSomeOtherRecordHelper.c_data_set.add(c_ptr)
        return ffi.cast("struct DjinniObjectHandle *", c_ptr)

    @ffi.callback("void(struct DjinniObjectHandle *, struct DjinniRecordHandle *)")
    def __python_add(cself, el):
        CPyObject.toPy(None, cself).append(CPyRecord.toPy(FooSomeOtherRecord.c_data_set, el))

    @ffi.callback("void(struct DjinniObjectHandle * )")
    def __delete(c_ptr):
        assert c_ptr in ListRecordFooSomeOtherRecordHelper.c_data_set
        ListRecordFooSomeOtherRecordHelper.c_data_set.remove(c_ptr)

    @staticmethod
    def _add_callbacks():
        lib.list_record_foo_some_other_record_add_callback__get_elem(ListRecordFooSomeOtherRecordHelper.__get_elem)
        lib.list_record_foo_some_other_record_add_callback___delete(ListRecordFooSomeOtherRecordHelper.__delete)
        lib.list_record_foo_some_other_record_add_callback__get_size(ListRecordFooSomeOtherRecordHelper.__get_size)
        lib.list_record_foo_some_other_record_add_callback__python_create(ListRecordFooSomeOtherRecordHelper.__python_create)
        lib.list_record_foo_some_other_record_add_callback__python_add(ListRecordFooSomeOtherRecordHelper.__python_add)

ListRecordFooSomeOtherRecordHelper._add_callbacks()

